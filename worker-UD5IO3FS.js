addEventListener("message",({data:n})=>{let a=n.activeTeam,t=n.lastLapNumberByRaceNumber,m=n.cumulatedTimeByRaceNumber,e=s(t,m),r=c(e,a),u=o(e);postMessage({racePositionByRaceNumber:e,teamRacePosition:r,firstTeamRaceNumber:u})});function s(n,a){let t=new Map,m=[];return n.forEach((e,r)=>{let u=a.get(r);if(u&&u.length>0){let i=u[u.length-1];m.push({raceNumber:r,lastLapNumber:e,totalTime:i})}}),m.sort((e,r)=>e.lastLapNumber!==r.lastLapNumber?r.lastLapNumber-e.lastLapNumber:e.totalTime-r.totalTime),m.forEach((e,r)=>{t.set(e.raceNumber,r+1)}),t}function c(n,a){if(a)return n.get(a.raceNumber)}function o(n){for(let[a,t]of n)if(t===1)return a}

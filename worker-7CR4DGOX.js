addEventListener("message",({data:n})=>{let t=n.lastLapNumberByRaceNumber,m=n.cumulatedTimeByRaceNumber,r=n.racePositionByRaceNumber,e=n.activeTeam,i=f(r,e?e.raceNumber:void 0,m,t),u=o(r,e?e.raceNumber:void 0,m,t);postMessage({gapAheadMilliseconds:i,gapBehindMilliseconds:u})});function f(n,t,m,r){if(!t)return;let e=n.get(t);if(!e||e===1)return;let i;for(let[u,d]of n)if(d===e-1){i=u;break}return b(t,i,m,r)}function o(n,t,m,r){if(!t)return;let e=n.get(t);if(!e||e===n.size)return;let i;for(let[u,d]of n)if(d===e+1){i=u;break}if(i)return c(t,i,m,r)}function b(n,t,m,r){if(!n||!t)return;let e=r.get(n),i=r.get(t);if(!e||!i)return;let u=m.get(n),d=m.get(t);if(!(!u||!d)){if(e===i){let s=u[u.length-1],a=d[d.length-1];return s-a}if(i>e){let s=u[u.length-1],a=d[e-1];if(a!==void 0)return s-a}}}function c(n,t,m,r){if(!n||!t)return;let e=r.get(n),i=r.get(t);if(!e||!i)return;let u=m.get(n),d=m.get(t);if(!(!u||!d)){if(e===i){let s=u[u.length-1],a=d[d.length-1];return s-a}if(e>i){let s=d[d.length-1],a=u[i-1];if(a!==void 0)return a-s}}}

var F=Math.pow(10,8)*24*60*60*1e3,Y=-F;var r=6e4;var y=3600;var d=y*24,w=d*7,R=d*365.2425,b=R/12,S=b*3,f=Symbol.for("constructDateFrom");function p(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&f in n?n[f](e):n instanceof Date?new n.constructor(e):new Date(e)}function i(n,e){return p(e||n,n)}function l(n,e,o){let t=i(n,o?.in);return t.setTime(t.getTime()+e*r),t}function x(n){return e=>{let t=(n?Math[n]:Math.trunc)(e);return t===0?0:t}}function s(n,e){return+i(n)-+i(e)}function M(n,e,o){let t=s(n,e)/r;return x(o?.roundingMethod)(t)}function g(n){return Math.trunc(n*r)}addEventListener("message",({data:n})=>{let e=n.lastRefuelPit,o=n.race,t=n.raceConfig,I=n.lapConfig.referenceLapTimeMillisecond,c=t.fuelDurationMinute,m=C(e,o),u=T(m,c),D=P(u,c,I),h=L(u,c);postMessage({lastRefuelTime:m,emptyFuelTime:u,remainingFuelLap:D,remainingFuelPercentage:h})});function C(n,e){if(n?.exitAt)return n.exitAt;if(e)return e.startedAt}function T(n,e){if(n)return l(n,e)}function L(n,e){if(n){let t=M(n,new Date)/e*100,a=Math.max(0,Math.min(t,100));return parseFloat(a.toFixed(0))}return 100}function P(n,e,o){if(n){let t=s(n,new Date);return Math.floor(t/o)}if(!n){let t=g(e);return Math.floor(t/o)}return 0}

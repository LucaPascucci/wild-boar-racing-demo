var y=Math.pow(10,8)*24*60*60*1e3,k=-y;var r=6e4;var b=3600;var d=b*24,w=d*7,L=d*365.2425,P=L/12,S=P*3,m=Symbol.for("constructDateFrom");function p(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&m in n?n[m](t):n instanceof Date?new n.constructor(t):new Date(t)}function i(n,t){return p(t||n,n)}function l(n,t,o){let e=i(n,o?.in);return e.setTime(e.getTime()+t*r),e}function x(n){return t=>{let e=(n?Math[n]:Math.trunc)(t);return e===0?0:e}}function s(n,t){return+i(n)-+i(t)}function g(n,t,o){let e=s(n,t)/r;return x(o?.roundingMethod)(e)}function M(n){return Math.trunc(n*r)}addEventListener("message",({data:n})=>{let t=n.kartConfig,o=n.lapConfig,e=n.race,c=n.lastKartChangePit,I=n.completedKartChanges,a=t.maxKartMinute,h=o.referenceLapTimeMillisecond,f=F(e,c),u=R(f,a),D=T(u,a,h),K=Y(u,a),C=t.minKartChange-I;postMessage({remainingKartChanges:C,remainingKartPercentage:K,remainingKartLap:D,expirationKartDate:u,lastKartChangeDate:f})});function F(n,t){if(t?.exitAt)return t.exitAt;if(n)return n.startedAt}function R(n,t){if(n)return l(n,t)}function T(n,t,o){if(n){let e=s(n,new Date);return Math.floor(e/o)}if(!n){let e=M(t);return Math.floor(e/o)}return 0}function Y(n,t){if(n){let e=g(n,new Date)/t*100,c=Math.max(0,Math.min(e,100));return parseFloat(c.toFixed(0))}return 100}

var l=Math.pow(10,8)*24*60*60*1e3,D=-l;var p=36e5;var y=3600;var u=y*24,T=u*7,I=u*365.2425,g=I/12,w=g*3,c=Symbol.for("constructDateFrom");function r(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&c in n?n[c](e):n instanceof Date?new n.constructor(e):new Date(e)}function d(n,e){return r(e||n,n)}function f(n,e,o){return r(o?.in||n,+d(n)+e)}function m(n,e,o){return f(n,e*p,o)}addEventListener("message",({data:n})=>{let e=n.race,o=n.tyreConfig,t=n.pits,s,i,a=!1;e&&(s=m(e.startedAt,o.startTyreChangeWindowHour),i=m(e.startedAt,o.endTyreChangeWindowHour),a=h(s,i));let x=C(t,o.minTyreChange);postMessage({openingTime:s,closingTime:i,tyreChangeWindowOpen:a,remainingTyreChange:x})});function h(n,e){if(n&&e){let o=new Date;return o>=n&&o<=e}return!1}function C(n,e){let o=n.filter(t=>t.tyreChange&&t.exitAt).length;return e-o}

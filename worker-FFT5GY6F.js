var D=Math.pow(10,8)*24*60*60*1e3,V=-D;var v=3600;var a=v*24,W=a*7,R=a*365.2425,b=R/12,Q=b*3,l=Symbol.for("constructDateFrom");function c(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&l in t?t[l](e):t instanceof Date?new t.constructor(e):new Date(e)}function u(t,e){return c(e||t,t)}function m(t,e,n){return c(n?.in||t,+u(t)+e)}function f(t,e,n){return m(t,e*1e3,n)}addEventListener("message",({data:t})=>{let e=t.pits,n=t.driverConfig,i=t.pitConfig,o=i.minPitSeconds,r=i.minTotalPitMinute,s=d(e),P=S(e,o),p=w(e),x=K(e),h=Y(e),C=g(e),M=k(e,n),I=L(e),A=G(e,r),T=F(e),y=H(e);postMessage({activePit:s,lastRefuelPit:p,lastInterphoneChangePit:x,lastPit:h,completedDriverChanges:C,remainingDriverChanges:M,activePitRemainingMilliseconds:P,pitAVGMilliseconds:I,remainingMinTotalPitMilliseconds:A,lastKartChangePit:T,completedKartChanges:y})});function d(t){for(let e of t)if(!e.exitAt)return e}function S(t,e){let n=d(t);if(n){let i=new Date().getTime();return f(n.entryAt,e).getTime()-i}return 0}function w(t){return t.filter(n=>n.refuel&&n.exitAt).sort((n,i)=>i.entryAt.getTime()-n.entryAt.getTime()).at(0)}function F(t){return t.filter(n=>n.kartChange&&n.exitAt).sort((n,i)=>i.entryAt.getTime()-n.entryAt.getTime()).at(0)}function K(t){return t.filter(n=>n.interphoneChange&&n.exitAt).sort((n,i)=>i.entryAt.getTime()-n.entryAt.getTime()).at(0)}function Y(t){return t.length===0?void 0:t.sort((n,i)=>i.entryAt.getTime()-n.entryAt.getTime()).at(0)}function g(t){return t.reduce((e,n)=>e+(n.entryDriverId!==n.exitDriverId?1:0),0)}function k(t,e){return Math.max(0,e.minDriverChange-g(t))}function L(t){let e=t.filter(i=>i.exitAt);if(e.length===0)return 0;let n=e.reduce((i,o)=>i+(o.exitAt.getTime()-o.entryAt.getTime()),0);return Math.round(n/e.length)}function G(t,e){let n=e*60*1e3;if(t.length===0)return n;let i=t.reduce((o,r)=>{let s=0;return r.exitAt?s=r.exitAt.getTime()-r.entryAt.getTime():s=new Date().getTime()-r.entryAt.getTime(),o+s},0);return Math.max(0,n-i)}function H(t){return t.filter(e=>e.kartChange&&e.exitAt).length}

{
  "version": 3,
  "sources": ["src/app/gap-simulator/service/gap-simulator.worker.ts"],
  "sourcesContent": ["/// <reference lib=\"webworker\" />\n\nimport { LapSimulatorConfig } from '../../lap-simulator/model/lap-simulator-config';\n\naddEventListener('message', ({ data }) => {\n  const lapSimulatorConfig = data.lapSimulatorConfig as LapSimulatorConfig;\n  const virtualLastCumulatedTimeByRaceNumber = data.virtualLastCumulatedTimeByRaceNumber as Map<number, number>;\n\n  const referenceRaceNumber = lapSimulatorConfig.referenceRaceNumber;\n\n  const virtualGapByRaceNumber = calculateVirtualGapByRaceNumber(\n    referenceRaceNumber,\n    virtualLastCumulatedTimeByRaceNumber\n  )\n\n  postMessage({\n    virtualGapByRaceNumber: virtualGapByRaceNumber\n  });\n});\n\nfunction calculateVirtualGapByRaceNumber(\n  referenceRaceNumber: number,\n  virtualLastCumulatedTimeByRaceNumber: Map<number, number>,\n): Map<number, number> {\n  const result = new Map<number, number>();\n\n  const referenceTime = virtualLastCumulatedTimeByRaceNumber.get(referenceRaceNumber);\n\n  if (referenceTime) {\n    virtualLastCumulatedTimeByRaceNumber.forEach((lastCumulatedTime, raceNumber) => {\n      if (referenceRaceNumber === raceNumber) {\n        result.set(raceNumber, 0);\n      } else {\n        const gap = referenceTime - lastCumulatedTime;\n        result.set(raceNumber, gap);\n      }\n    });\n  }\n  return result;\n}\n"],
  "mappings": ";AAIA,iBAAiB,WAAW,CAAC,EAAE,KAAK,MAAM;AACxC,QAAM,qBAAqB,KAAK;AAChC,QAAM,uCAAuC,KAAK;AAElD,QAAM,sBAAsB,mBAAmB;AAE/C,QAAM,yBAAyB;AAAA,IAC7B;AAAA,IACA;AAAA,EACF;AAEA,cAAY;AAAA,IACV;AAAA,EACF,CAAC;AACH,CAAC;AAED,SAAS,gCACP,qBACA,sCACqB;AACrB,QAAM,SAAS,oBAAI,IAAoB;AAEvC,QAAM,gBAAgB,qCAAqC,IAAI,mBAAmB;AAElF,MAAI,eAAe;AACjB,yCAAqC,QAAQ,CAAC,mBAAmB,eAAe;AAC9E,UAAI,wBAAwB,YAAY;AACtC,eAAO,IAAI,YAAY,CAAC;AAAA,MAC1B,OAAO;AACL,cAAM,MAAM,gBAAgB;AAC5B,eAAO,IAAI,YAAY,GAAG;AAAA,MAC5B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;",
  "names": []
}

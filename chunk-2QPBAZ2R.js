import{a as n}from"./chunk-Y44SY3C2.js";import{k as c}from"./chunk-QB5SOPTM.js";import{r as p}from"./chunk-IGED4TOA.js";import{M as l,N as a}from"./chunk-Q6UHPJXR.js";import{R as s,X as i,sa as r,u}from"./chunk-7TD4AYMG.js";var b=class t{lapService=i(p);lapSimulatorConfigService=i(n);racePositionService=i(c);normalizedCumulatedTimeLaps=r(new Map);shadowLaps=r([]);futureLaps=r([]);futureLapsWithPitNow=r([]);virtualLastCumulatedTimeByRaceNumber=r(new Map);worker;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL("worker-7IAODPYG.js",import.meta.url),{type:"module"}),this.worker.onmessage=({data:e})=>{this.normalizedCumulatedTimeLaps.set(e.normalizedCumulatedTimeLaps),this.shadowLaps.set(e.shadowLaps),this.futureLaps.set(e.futureLaps),this.futureLapsWithPitNow.set(e.futureLapsWithPitNow),this.virtualLastCumulatedTimeByRaceNumber.set(e.virtualLastCumulatedTimeByRaceNumber)}),u({cumulatedTimeByRaceNumber:a(this.lapService.cumulatedTimeByRaceNumber),pacesByRaceNumber:a(this.lapService.pacesByRaceNumber),lastLapNumberByRaceNumber:a(this.lapService.lastLapNumberByRaceNumber),lapSimulatorConfig:a(this.lapSimulatorConfigService.lapSimulatorConfig),firstTeamRaceNumber:a(this.racePositionService.firstTeamRaceNumber)}).pipe(l()).subscribe(({cumulatedTimeByRaceNumber:e,pacesByRaceNumber:o,lastLapNumberByRaceNumber:f,lapSimulatorConfig:m,firstTeamRaceNumber:d})=>{this.worker&&m&&this.worker.postMessage({cumulatedTimeByRaceNumber:e,pacesByRaceNumber:o,lastLapNumberByRaceNumber:f,lapSimulatorConfig:m,firstTeamRaceNumber:d})})}static \u0275fac=function(o){return new(o||t)};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};export{b as a};

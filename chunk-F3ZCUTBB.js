import{a as y}from"./chunk-ET5NLYGN.js";import{a as _,b as W,c as I,d as D,e as T,f as w,g as B}from"./chunk-SENMOW3R.js";import{h as f,k as b}from"./chunk-QB5SOPTM.js";import"./chunk-IGED4TOA.js";import"./chunk-Q6UHPJXR.js";import{Ca as o,E as S,Jb as s,Ka as x,Kb as C,Oa as c,Sb as M,Ua as u,X as l,Ya as d,ab as r,bb as a,hb as h,ob as n,qb as g,sa as m,z as v}from"./chunk-7TD4AYMG.js";import"./chunk-2VMXMS7J.js";function k(i,e){if(i&1&&(r(0,"div",0)(1,"div",2),n(2),a()()),i&2){let t=h();u("ngClass",t.shouldShowMessage()?t.messageBackgroundColor():"bg-neutral-900"),o(),u("ngClass",t.messageTextColor()),o(),g(" ",t.messageContent()," ")}}function R(i,e){i&1&&n(0," + ")}function U(i,e){if(i&1&&n(0),i&2){let t=h(2);g(" ",t.teamRacePosition()," ")}}function N(i,e){i&1&&n(0," -- ")}function j(i,e){i&1&&n(0," - ")}function H(i,e){if(i&1&&(r(0,"div",1)(1,"div",3)(2,"div",4),n(3,"AHEAD"),a(),r(4,"div",4),c(5,R,1,0),n(6),a()(),r(7,"div",5),n(8,"P: "),c(9,U,1,1)(10,N,1,0),a(),r(11,"div",6)(12,"div",4),n(13,"BEHIND"),a(),r(14,"div",4),c(15,j,1,0),n(16),a()()()),i&2){let t=h();o(5),d(t.gapAheadMilliseconds()?5:-1),o(),g(" ",t.gapAheadMillisecondsString()," "),o(3),d(t.teamRacePosition()!==void 0?9:10),o(6),d(t.gapBehindMilliseconds()?15:-1),o(),g(" ",t.gapBehindMillisecondsString()," ")}}var P=class i{steeringWheelConfigService=l(y);steeringWheelMessageUpdateService=l(W);gapService=l(_);racePositionService=l(b);messageDurationSeconds=s(()=>this.steeringWheelConfigService.steeringWheelConfig()?.messageDurationSeconds??5);messageInvertColorIntervalMilliseconds=s(()=>this.steeringWheelConfigService.steeringWheelConfig()?.messageInvertColorIntervalMilliseconds??500);currentMessage=m(void 0);isInverted=m(!1);isDisplaying=m(!1);intervalSubscription;messageContent=s(()=>{let e=this.currentMessage();return e?I(e):""});messageBackgroundColor=s(()=>{let e=this.currentMessage();return e?this.isInverted()?w(e):D(e):""});messageTextColor=s(()=>{let e=this.currentMessage();return e?this.isInverted()?B(e):T(e):""});shouldShowMessage=s(()=>this.isDisplaying()&&this.currentMessage()!==void 0);teamRacePosition=this.racePositionService.teamRacePosition;gapAheadMilliseconds=this.gapService.gapAheadMilliseconds;gapAheadMillisecondsString=s(()=>{let e=this.gapService.gapAheadMilliseconds();return e?f(e):"--:--.---"});gapBehindMilliseconds=this.gapService.gapBehindMilliseconds;gapBehindMillisecondsString=s(()=>{let e=this.gapService.gapBehindMilliseconds();return e?f(Math.abs(e)):"--:--.---"});constructor(){C(()=>{let e=this.steeringWheelMessageUpdateService.steeringWheelMessageUpdate();if(e&&e.type){let t={type:e.type};this.currentMessage.set(t),this.startMessageDisplay()}})}startMessageDisplay(){this.intervalSubscription&&this.intervalSubscription.unsubscribe(),this.isInverted.set(!1),this.isDisplaying.set(!0);let e=this.messageDurationSeconds()*1e3,t=this.messageInvertColorIntervalMilliseconds(),p=e/2,A=Math.ceil(p/t);this.intervalSubscription=v(t).pipe(S(A)).subscribe({next:()=>{this.isInverted.update(E=>!E)},complete:()=>{this.isInverted.set(!1),setTimeout(()=>{this.stopMessageDisplay()},p)}})}stopMessageDisplay(){this.intervalSubscription&&(this.intervalSubscription.unsubscribe(),this.intervalSubscription=void 0),this.isInverted.set(!1),this.isDisplaying.set(!1)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-steering-wheel"]],decls:2,vars:1,consts:[[1,"w-full","h-full","min-h-screen","min-w-screen","flex","flex-col","items-center","justify-center","transition-colors","duration-500",3,"ngClass"],[1,"w-full","h-full","min-h-screen","min-w-screen","flex","flex-col","gap-0.5","items-center","justify-center","bg-neutral-900","text-neutral-100"],[1,"text-6xl","font-bold","text-center","transition-colors","duration-500",3,"ngClass"],[1,"mb-3","text-center"],[1,"text-4xl","font-bold"],[1,"text-6xl","font-bold","mb-3"],[1,"text-center"]],template:function(t,p){t&1&&c(0,k,3,3,"div",0)(1,H,17,5,"div",1),t&2&&d(p.shouldShowMessage()?0:1)},dependencies:[M],encapsulation:2})};export{P as SteeringWheelComponent};
